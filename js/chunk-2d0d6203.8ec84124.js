(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0d6203"],{"70e9":function(e,t,c){"use strict";c.r(t);var a=c("7a23"),l={class:"d-flex flex-column w-100 vh-100 bg-light"},o=Object(a["createElementVNode"])("div",{class:"bg-info"},[Object(a["createElementVNode"])("div",{class:"container"},[Object(a["createElementVNode"])("h3",{class:"fs-3 py-3 text-white text-shadow"},"文章")])],-1),n={class:"container bg-light"},i={class:"d-flex flex-column"},r={class:"d-flex py-3"},s=Object(a["createElementVNode"])("h3",{class:"fs-4"},"文章列表",-1),d={class:"mb-6"},b=Object(a["createElementVNode"])("thead",null,[Object(a["createElementVNode"])("tr",{class:"border border-top-0 border-start-0 border-end-0 border-3"},[Object(a["createElementVNode"])("th",{width:"100"}," 文章名稱 "),Object(a["createElementVNode"])("th",{width:"60"}," 作者 "),Object(a["createElementVNode"])("th",{width:"60"}," 分類 "),Object(a["createElementVNode"])("th",{width:"100"}," 創立時間 "),Object(a["createElementVNode"])("th",{width:"60"}," 啟用 "),Object(a["createElementVNode"])("th",{width:"120"}," 編輯 ")])],-1),m={class:"btn btn-success disabled"},u=["checked"],p=Object(a["createElementVNode"])("span",{class:"check-btn-box"},[Object(a["createElementVNode"])("span",{class:"check-btn"})],-1),h={class:"d-flex"},j=["onClick"],O=["onClick"],N=Object(a["createTextVNode"])("s ");function f(e,t,c,f,g,E){var V=this,v=Object(a["resolveComponent"])("Pagination"),A=Object(a["resolveComponent"])("ArticleModal"),k=Object(a["resolveComponent"])("DeleteModal"),w=Object(a["resolveComponent"])("Loading");return Object(a["openBlock"])(),Object(a["createElementBlock"])(a["Fragment"],null,[Object(a["createElementVNode"])("section",l,[o,Object(a["createElementVNode"])("div",n,[Object(a["createElementVNode"])("div",i,[Object(a["createElementVNode"])("div",r,[s,Object(a["createElementVNode"])("button",{onClick:t[0]||(t[0]=function(e){return E.openModal(!0)}),class:"btn btn-secondary ms-auto"},"新增文章")]),Object(a["createElementVNode"])("table",d,[b,Object(a["createElementVNode"])("tbody",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(g.articles,(function(e){return Object(a["openBlock"])(),Object(a["createElementBlock"])("tr",{key:e.id,class:"border-bottom"},[Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.title),1),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(e.author),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("ul",null,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(e.tag,(function(e){return Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:e,class:"list-unstyled"},[Object(a["createElementVNode"])("div",m,Object(a["toDisplayString"])(e),1)])})),128))])]),Object(a["createElementVNode"])("td",null,Object(a["toDisplayString"])(V.toNormalTime(e.create_at)),1),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("label",null,[Object(a["createElementVNode"])("input",{disabled:"",checked:e.isPublic,type:"checkbox",class:"checkbox","true-value":1,"false-value":0},null,8,u),p])])]),Object(a["createElementVNode"])("td",null,[Object(a["createElementVNode"])("div",h,[Object(a["createElementVNode"])("button",{onClick:function(t){return E.getArticle(e.id)},type:"button",class:"btn btn-primary"},"編輯",8,j),Object(a["createElementVNode"])("button",{onClick:function(t){return E.openDeleteModal(e)},type:"button",class:"btn btn-danger"},"刪除",8,O)])])])})),128))])]),Object(a["createVNode"])(v,{onUpdatePage:E.getAticles,pagination:g.pagination,class:"mx-auto"},null,8,["onUpdatePage","pagination"])])]),Object(a["createVNode"])(A,{ref:"modal",article:g.tempArticle,articleIsNew:g.articleIsNew,onEmitUpdateArticle:E.updateAticle},null,8,["article","articleIsNew","onEmitUpdateArticle"]),Object(a["createVNode"])(k,{ref:"deletModal",item:g.tempArticle,onEmitDelete:E.deleteArticle},null,8,["item","onEmitDelete"]),Object(a["createVNode"])(w,{active:g.isLoading,"z-index":1060},null,8,["active"])]),N],64)}var g=c("5530"),E=(c("99af"),c("a434"),{ref:"modal",class:"modal fade",id:"articleModal",tabindex:"-1","aria-labelledby":"articleModalLabel","aria-hidden":"true"}),V={class:"modal-dialog modal-xl"},v={class:"modal-content"},A={class:"modal-header bg-secondary"},k={class:"modal-title text-white",id:"articleModalLabel"},w={key:0},x={key:1},M=Object(a["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),y={class:"modal-body"},B={class:"container"},L={class:"row"},C={class:"col-12"},D={class:"row mb-3"},T={class:"col-6"},S=Object(a["createElementVNode"])("label",{for:"title",class:"form-label fw-bold"},"文章標題",-1),_={class:"col-6"},$=Object(a["createElementVNode"])("label",{for:"title",class:"form-label fw-bold"},"作者",-1),U={class:"row mb-6"},I={class:"col-6"},P=Object(a["createElementVNode"])("label",{for:"due_date",class:"form-label fw-bold"},"文章建立日期",-1),z={class:"col-6 d-flex align-items-end"},F={class:"w-100"},J=Object(a["createElementVNode"])("label",{for:"tag",class:"form-label fw-bold"},"標籤",-1),R={class:"d-flex"},q={class:"d-flex flex-wrap"},G={class:"btn btn-success inactive"},H=["onClick"],K={class:"row mb-6"},Q={class:"col-12 d-flex"},W={for:"isEnable",class:"d-flex align-items-center"},X=Object(a["createElementVNode"])("span",{class:"check-btn-box"},[Object(a["createElementVNode"])("span",{class:"check-btn"})],-1),Y=Object(a["createElementVNode"])("span",{class:"ms-4"},"是否啟用",-1),Z={class:"row"},ee={class:"col-12"},te={class:"modal-footer"},ce=Object(a["createElementVNode"])("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"},"取消",-1);function ae(e,t,c,l,o,n){var i=Object(a["resolveComponent"])("Ckeditor");return Object(a["openBlock"])(),Object(a["createElementBlock"])("div",E,[Object(a["createElementVNode"])("div",V,[Object(a["createElementVNode"])("div",v,[Object(a["createElementVNode"])("div",A,[Object(a["createElementVNode"])("h5",k,[c.articleIsNew?(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",w,"新增文章")):(Object(a["openBlock"])(),Object(a["createElementBlock"])("span",x,"編輯文章"))]),M]),Object(a["createElementVNode"])("div",y,[Object(a["createElementVNode"])("div",B,[Object(a["createElementVNode"])("div",L,[Object(a["createElementVNode"])("div",C,[Object(a["createElementVNode"])("div",D,[Object(a["createElementVNode"])("div",T,[Object(a["createElementVNode"])("div",null,[S,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return o.tempArticle.title=e}),type:"text",class:"form-control",id:"title",placeholder:"輸入標題"},null,512),[[a["vModelText"],o.tempArticle.title]])])]),Object(a["createElementVNode"])("div",_,[Object(a["createElementVNode"])("div",null,[$,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(e){return o.tempArticle.author=e}),type:"text",class:"form-control",id:"title",placeholder:"輸入作者"},null,512),[[a["vModelText"],o.tempArticle.author]])])])]),Object(a["createElementVNode"])("div",U,[Object(a["createElementVNode"])("div",I,[Object(a["createElementVNode"])("div",null,[P,Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(e){return o.create_at=e}),type:"date",class:"form-control",id:"due_date",placeholder:"輸入文章建立日期"},null,512),[[a["vModelText"],o.create_at]])])]),Object(a["createElementVNode"])("div",z,[Object(a["createElementVNode"])("div",F,[J,Object(a["createElementVNode"])("div",R,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{"onUpdate:modelValue":t[3]||(t[3]=function(e){return o.tag=e}),type:"text",class:"form-control w-50 me-3",id:"tag",placeholder:"輸入標籤"},null,512),[[a["vModelText"],o.tag]]),Object(a["createElementVNode"])("button",{id:"tag-btn",onClick:t[4]||(t[4]=function(){return n.addTag&&n.addTag.apply(n,arguments)}),class:Object(a["normalizeClass"])([n.switchTag(),"btn btn-primary w-30"])},"新增標籤",2)]),Object(a["createElementVNode"])("ul",q,[(Object(a["openBlock"])(!0),Object(a["createElementBlock"])(a["Fragment"],null,Object(a["renderList"])(o.tempArticle.tag,(function(e,t){return Object(a["openBlock"])(),Object(a["createElementBlock"])("li",{key:e,class:"d-flex"},[Object(a["createElementVNode"])("div",G,Object(a["toDisplayString"])(e),1),Object(a["createElementVNode"])("button",{onClick:function(e){return o.tempArticle.tag.splice(t,1)},class:"btn btn-danger"},"刪除",8,H)])})),128))])])])]),Object(a["createElementVNode"])("div",K,[Object(a["createElementVNode"])("div",Q,[Object(a["createElementVNode"])("div",null,[Object(a["createElementVNode"])("label",W,[Object(a["withDirectives"])(Object(a["createElementVNode"])("input",{"onUpdate:modelValue":t[5]||(t[5]=function(e){return o.tempArticle.isPublic=e}),"true-value":!0,"false-value":!1,type:"checkbox",class:"checkbox pt-8",name:"",id:"isEnable"},null,512),[[a["vModelCheckbox"],o.tempArticle.isPublic]]),X,Y])])])])])]),Object(a["createElementVNode"])("div",Z,[Object(a["createElementVNode"])("div",ee,[Object(a["createVNode"])(i,{editor:o.editor,modelValue:o.tempArticle.content,"onUpdate:modelValue":t[6]||(t[6]=function(e){return o.tempArticle.content=e}),config:o.editorConfig},null,8,["editor","modelValue","config"])])])])]),Object(a["createElementVNode"])("div",te,[ce,Object(a["createElementVNode"])("button",{onClick:t[7]||(t[7]=function(){return n.updateArticle&&n.updateArticle.apply(n,arguments)}),type:"button",class:"btn btn-primary"},"確認")])])])],512)}var le=c("3730"),oe=c.n(le),ne=c("fb3d"),ie=c.n(ne),re=c("2178"),se=c("c9c0"),de={mixins:[se["a"]],inject:["toNormalTime","toTimestamp"],components:{Ckeditor:oe.a.component},props:{article:{type:Object,default:function(){return{}}},articleIsNew:{type:Boolean,default:!1}},emits:["emit-update-article"],data:function(){return{tempArticle:{},tag:"",create_at:"",editor:ie.a,editorConfig:{extraPlugins:[this.uploader]}}},watch:{article:function(){this.tempArticle=Object(g["a"])({},this.article),this.articleIsNew?(this.create_at=this.toNormalTime(),this.tempArticle.create_at=new Date(this.create_at).getTime()/1e3,this.tempArticle.tag=[],this.tempArticle.isPublic=!1):this.create_at=this.toNormalTime(this.tempArticle.create_at)},create_at:function(){this.tempArticle.create_at=new Date(this.create_at).getTime()/1e3}},methods:{updateArticle:function(){this.$emit("emit-update-article",this.tempArticle)},switchTag:function(){var e;return{disabled:!(null!==(e=this.tag)&&void 0!==e&&e.length)}},addTag:function(){this.tempArticle.tag.push(this.tag),this.tag=""},uploader:function(e){e.plugins.get("FileRepository").createUploadAdapter=function(e){return new re["a"](e)}}}},be=c("d959"),me=c.n(be);const ue=me()(de,[["render",ae]]);var pe=ue,he=c("627b"),je=c("1799"),Oe={name:"DashBoardArticles",components:{ArticleModal:pe,Pagination:je["a"],DeleteModal:he["a"]},data:function(){return{articles:[],pagination:{},tempArticle:{},articleIsNew:"",isLoading:!1}},methods:{getAticles:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("z80823","/admin/articles?page=").concat(t);this.$http.get(c).then((function(t){e.articles=t.data.articles,e.pagination=t.data.pagination,e.isLoading=!1})).catch((function(t){e.isLoading=!1,e.emitter.emit("push-message",{content:t,state:!1})}))},openModal:function(e,t){this.articleIsNew=e,this.articleIsNew?this.tempArticle={}:this.tempArticle=Object(g["a"])({},t),this.$refs.modal.openModal()},getArticle:function(e){var t=this,c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("z80823","/article/").concat(e);this.isLoading=!0,this.$http.get(c).then((function(e){t.isLoading=!1,e.data.success?t.openModal(!1,e.data.article):t.putMessageState(e,"取得單一文章")})).catch((function(e){t.isLoading=!1,t.putMessageState(e,"取得單一文章")}))},openDeleteModal:function(e){this.tempArticle=Object(g["a"])({},e),this.$refs.deletModal.openModal()},deleteArticle:function(e){var t=this;this.tempArticle=Object(g["a"])({},e),this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("z80823","/admin/article/").concat(this.tempArticle.id);this.$http.delete(c).then((function(e){e.data.success?(t.getAticles(),t.isLoading=!1,t.$refs.deletModal.closeModal(),t.putMessageState(e,"刪除".concat(t.tempArticle.title))):(t.isLoading=!1,t.$refs.deletModal.closeModal(),t.putMessageState(e,"刪除".concat(t.tempArticle.title)))})).catch((function(e){t.isLoading=!1,t.$refs.deletModal.closeModal(),t.putMessageState(e,"刪除".concat(t.tempArticle.title))}))},updateAticle:function(e){var t=this;this.tempArticle=e,this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("z80823","/admin/article"),a="post",l="建立文章";this.articleIsNew||(c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("z80823","/admin/article/").concat(this.tempArticle.id),a="put",l="更新文章"),this.$http[a](c,{data:this.tempArticle}).then((function(e){e.data.success?(t.getAticles(),t.isLoading=!1,t.$refs.modal.closeModal(),t.putMessageState(e,l)):(t.isLoading=!1,t.$refs.modal.closeModal(),t.putMessageState(e,l))})).catch((function(e){t.isLoading=!1,t.$refs.modal.closeModal(),t.putMessageState(e,l)}))}},inject:["putMessageState","emitter","toNormalTime","toTimestamp"],mounted:function(){this.getAticles()}};const Ne=me()(Oe,[["render",f]]);t["default"]=Ne}}]);
//# sourceMappingURL=chunk-2d0d6203.8ec84124.js.map