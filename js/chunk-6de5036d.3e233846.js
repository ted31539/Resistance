(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6de5036d"],{9505:function(e,t,c){"use strict";c.r(t);c("b0c0");var o=c("7a23"),r={class:"container w-100 pb-11"},a={class:"row"},l={class:"col-12 pb-11"},n={class:"bg-light shadow-sm"},d=Object(o["createElementVNode"])("h3",{class:"title"},"感謝您的購買",-1),s=Object(o["createElementVNode"])("p",{class:"fs-2 text-center p-4"},"下列為您的訂單資訊",-1),b={class:"d-flex justify-content-center p-4"},i=Object(o["createTextVNode"])("前往首頁"),m=Object(o["createTextVNode"])("繼續購物 "),O={class:"row"},j={class:"col-12 col-lg-6 pb-11"},u={class:"shadow-sm"},p=Object(o["createElementVNode"])("h3",{class:"title"},"顧客資訊",-1),N={class:"bg-light p-4"},f={class:"row row-cols-2"},E=Object(o["createElementVNode"])("div",{class:"col-4 border-bottom mb-4"},"下單日期：",-1),V={class:"col-7 text-break border-bottom mb-4"},h=Object(o["createElementVNode"])("div",{class:"col-4 border-bottom mb-4"},"訂單編號：",-1),g={class:"col-7 text-break border-bottom mb-4"},v=Object(o["createElementVNode"])("div",{class:"col-4 border-bottom mb-4"},"顧客姓名：",-1),y={class:"col-7 text-break border-bottom mb-4"},k=Object(o["createElementVNode"])("div",{class:"col-4 border-bottom mb-4"},"聯絡電話：",-1),x={class:"col-7 text-break border-bottom mb-4"},w=Object(o["createElementVNode"])("div",{class:"col-4 border-bottom mb-4"},"電子郵件：",-1),S={class:"col-7 text-break border-bottom mb-4"},B=Object(o["createElementVNode"])("div",{class:"col-4 border-bottom mb-4"},"地址：",-1),T={class:"col-7 text-break border-bottom mb-4"},D=Object(o["createElementVNode"])("div",{class:"col-4 border-bottom mb-4"},"訂單金額：",-1),M={class:"col-7 text-break border-bottom mb-4"},$={class:"col-12 col-lg-6"},C={class:"shadow-sm"},L={class:"shadow-sm d-flex flex-column bg-light"},F=Object(o["createElementVNode"])("thead",null,[Object(o["createElementVNode"])("tr",{class:"row g-0"},[Object(o["createElementVNode"])("th",{class:"col-12"},[Object(o["createElementVNode"])("h3",{class:"title"},"購物車")])]),Object(o["createElementVNode"])("tr",{class:"row g-0 d-none d-md-flex"},[Object(o["createElementVNode"])("th",{class:"col-5 p-2"},"商品資料"),Object(o["createElementVNode"])("th",{class:"col-3 p-2"},"單價價格"),Object(o["createElementVNode"])("th",{class:"col-1 p-2"},"數量"),Object(o["createElementVNode"])("th",{class:"col-3 p-2"},"小計")])],-1),R={class:"col-10 col-md-5 d-flex align-items-center p-2"},z=["src"],G={class:"fs-6 fs-sm-4"},A={class:"fs-6 fs-sm-5"},_={class:"col-12 col-md-1 order-md-3 d-flex align-items-center fs-6 fs-sm-4 fw-bold p-2"},J=Object(o["createElementVNode"])("span",{class:"d-md-none"},"數量： ",-1),q={class:"col-6 col-md-3 order-md-2 fw-bold fs-6 fs-sm-4 d-flex align-items-center p-2"},P=Object(o["createElementVNode"])("span",{class:"d-md-none"},"單價： ",-1),U={class:"col-6 col-md-3 order-md-4 fw-bold fs-6 fs-sm-4 d-flex align-items-center p-2 text-end text-md-start"},H=Object(o["createElementVNode"])("span",{class:"d-md-none"},"小計： ",-1),I={class:"row g-0 p-2"},K=Object(o["createElementVNode"])("td",{class:"col-6 fs-5"},"原價：",-1),Q={class:"col-6 text-end fs-5"},W={class:"row g-0 p-2"},X={class:"col-6 fs-6 fs-sm-5 text-secondary fw-bold mb-4"},Y={class:"col-6 text-end fs-6 fs-sm-5 text-secondary fw-bold"},Z={class:"row g-0 p-2 mb-4"},ee=Object(o["createElementVNode"])("td",{class:"col-6 fs-5 fs-sm-4 fw-bold"},"總計:",-1),te={class:"col-6 fs-5 fs-sm-4 text-end fw-bold"};function ce(e,t,c,ce,oe,re){var ae,le,ne,de,se=Object(o["resolveComponent"])("Loading"),be=Object(o["resolveComponent"])("router-link"),ie=Object(o["resolveComponent"])("OrderRemindModal");return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],null,[Object(o["createVNode"])(se,{active:oe.isLoading,"z-index":1060},null,8,["active"]),Object(o["createElementVNode"])("section",r,[Object(o["createElementVNode"])("div",a,[Object(o["createElementVNode"])("div",l,[Object(o["createElementVNode"])("div",n,[d,s,Object(o["createElementVNode"])("div",b,[Object(o["createVNode"])(be,{to:"/",class:"btn w-40 btn-outline-primary me-8"},{default:Object(o["withCtx"])((function(){return[i]})),_:1}),Object(o["createVNode"])(be,{to:{name:"Products",query:{category:"所有商品"}},class:"btn w-40 btn-primary"},{default:Object(o["withCtx"])((function(){return[m]})),_:1})])])])]),Object(o["createElementVNode"])("div",O,[Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("div",u,[p,Object(o["createElementVNode"])("div",N,[Object(o["createElementVNode"])("div",f,[E,Object(o["createElementVNode"])("div",V,Object(o["toDisplayString"])(re.toNormalTime(oe.order.create_at)),1),h,Object(o["createElementVNode"])("div",g,Object(o["toDisplayString"])(oe.order.id),1),v,Object(o["createElementVNode"])("div",y,Object(o["toDisplayString"])(null===(ae=oe.order.user)||void 0===ae?void 0:ae.name),1),k,Object(o["createElementVNode"])("div",x,Object(o["toDisplayString"])(null===(le=oe.order.user)||void 0===le?void 0:le.tel),1),w,Object(o["createElementVNode"])("div",S,Object(o["toDisplayString"])(null===(ne=oe.order.user)||void 0===ne?void 0:ne.email),1),B,Object(o["createElementVNode"])("div",T,Object(o["toDisplayString"])(null===(de=oe.order.user)||void 0===de?void 0:de.address),1),D,Object(o["createElementVNode"])("div",M,"NT$ "+Object(o["toDisplayString"])(re.currency(oe.order.total)),1)])])])]),Object(o["createElementVNode"])("div",$,[Object(o["createElementVNode"])("div",C,[Object(o["createElementVNode"])("table",L,[F,Object(o["createElementVNode"])("tbody",null,[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(oe.order.products,(function(e){return Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:e.id},[(Object(o["openBlock"])(!0),Object(o["createElementBlock"])(o["Fragment"],null,Object(o["renderList"])(e.sizeObj,(function(t,c){return Object(o["openBlock"])(),Object(o["createElementBlock"])("tr",{key:t,class:"row g-0 border-bottom"},[Object(o["createElementVNode"])("td",R,[Object(o["createElementVNode"])("img",{class:"w-50 me-2",src:e.product.imageUrl,alt:""},null,8,z),Object(o["createElementVNode"])("h4",G,[Object(o["createTextVNode"])(Object(o["toDisplayString"])(e.product.title)+" ",1),Object(o["createElementVNode"])("span",A,Object(o["toDisplayString"])("(".concat(c,")")),1)])]),Object(o["createElementVNode"])("td",_,[J,Object(o["createTextVNode"])(Object(o["toDisplayString"])(t),1)]),Object(o["createElementVNode"])("td",q,[P,Object(o["createTextVNode"])("NT$"+Object(o["toDisplayString"])(re.currency(e.product.price)),1)]),Object(o["createElementVNode"])("td",U,[H,Object(o["createTextVNode"])("NT$"+Object(o["toDisplayString"])(re.currency(e.product.price*t)),1)])])})),128))],64)})),128))]),Object(o["createElementVNode"])("tfoot",null,[oe.priceGap?(Object(o["openBlock"])(),Object(o["createElementBlock"])(o["Fragment"],{key:0},[Object(o["createElementVNode"])("tr",I,[K,Object(o["createElementVNode"])("td",Q,"NT$ "+Object(o["toDisplayString"])(oe.originTotal),1)]),Object(o["createElementVNode"])("tr",W,[Object(o["createElementVNode"])("td",X,"優惠："+Object(o["toDisplayString"])(oe.discount),1),Object(o["createElementVNode"])("td",Y,"省去 -NT$ "+Object(o["toDisplayString"])(oe.priceGap),1)])],64)):Object(o["createCommentVNode"])("",!0),Object(o["createElementVNode"])("tr",Z,[ee,Object(o["createElementVNode"])("td",te,"NT$ "+Object(o["toDisplayString"])(re.currency(oe.order.total)),1)])])])])])])]),Object(o["createVNode"])(ie,{authState:oe.authState,ref:"orderRemindModal"},null,8,["authState"])],64)}c("99af"),c("d3b7"),c("159b"),c("b64b");var oe=c("ea7b"),re=c("b414"),ae={ref:"modal",class:"modal fade z-index-999",id:"productModal",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},le={class:"modal-dialog modal-xl"},ne={class:"modal-content"},de=Object(o["createElementVNode"])("div",{class:"modal-header bg-secondary"},[Object(o["createElementVNode"])("h5",{class:"modal-title text-white",id:"productModalLabel"}," 提醒 "),Object(o["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),se={class:"modal-body"},be={class:"container"},ie={key:0},me={key:1},Oe={class:"modal-footer"},je=Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"},"確認",-1);function ue(e,t,c,r,a,l){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ae,[Object(o["createElementVNode"])("div",le,[Object(o["createElementVNode"])("div",ne,[de,Object(o["createElementVNode"])("div",se,[Object(o["createElementVNode"])("div",be,[c.authState?(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",ie," 可至會員專區查看訂單! ")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("div",me," 可用訂單上的信箱，至會員專區註冊查看訂單! "))])]),Object(o["createElementVNode"])("div",Oe,[c.authState?(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:0,onClick:t[0]||(t[0]=function(t){return e.closeModal,e.$router.push("/member")}),type:"button",class:"btn btn-primary"},"前往會員專區")):(Object(o["openBlock"])(),Object(o["createElementBlock"])("button",{key:1,onClick:t[1]||(t[1]=function(t){return e.closeModal,e.$router.push("/member")}),type:"button",class:"btn btn-primary"},"註冊會員")),je])])])],512)}var pe=c("c9c0"),Ne={inject:["toNormalTime","toTimestamp"],mixins:[pe["a"]],emits:["update-passsword"],props:{authState:{type:Boolean,default:!1}},data:function(){return{}}},fe=c("d959"),Ee=c.n(fe);const Ve=Ee()(Ne,[["render",ue]]);var he=Ve,ge={name:"payment",inject:["emitter","putMessageState","currency","toNormalTime"],components:{OrderRemindModal:he},data:function(){return{order:{},isLoading:!1,originTotal:0,priceGap:"",discount:"",authState:""}},methods:{getOrder:function(e){var t=this;this.isLoading=!0;var c="".concat("https://vue3-course-api.hexschool.io/","api/").concat("z80823","/order/").concat(e);this.$http.get(c).then((function(e){e.data.success?t.order=e.data.order:t.putMessageState(e,"取得訂單"),t.isLoading=!1})).catch((function(){t.isLoading=!1,t.emitter.emit("push-message",{content:"發生錯誤，請重新整理頁面",state:!1})}))},getAuthState:function(){var e=this;Object(oe["c"])(re["a"],(function(t){t?(e.authState=!0,e.$refs.orderRemindModal.openModal()):(e.authState=!1,e.$refs.orderRemindModal.openModal())}))}},watch:{order:function(){var e=this,t=this.order.total;Object.keys(this.order.products).forEach((function(t){e.originTotal+=e.order.products[t].total})),this.priceGap=this.originTotal-t,this.discount="".concat(t/this.originTotal*100,"%")}},created:function(){this.getAuthState()},mounted:function(){var e=this.$route.params.id;this.getOrder(e)}};const ve=Ee()(ge,[["render",ce]]);t["default"]=ve},"99af":function(e,t,c){"use strict";var o=c("23e7"),r=c("da84"),a=c("d039"),l=c("e8b5"),n=c("861d"),d=c("7b0b"),s=c("07fa"),b=c("8418"),i=c("65f0"),m=c("1dde"),O=c("b622"),j=c("2d00"),u=O("isConcatSpreadable"),p=9007199254740991,N="Maximum allowed index exceeded",f=r.TypeError,E=j>=51||!a((function(){var e=[];return e[u]=!1,e.concat()[0]!==e})),V=m("concat"),h=function(e){if(!n(e))return!1;var t=e[u];return void 0!==t?!!t:l(e)},g=!E||!V;o({target:"Array",proto:!0,forced:g},{concat:function(e){var t,c,o,r,a,l=d(this),n=i(l,0),m=0;for(t=-1,o=arguments.length;t<o;t++)if(a=-1===t?l:arguments[t],h(a)){if(r=s(a),m+r>p)throw f(N);for(c=0;c<r;c++,m++)c in a&&b(n,m,a[c])}else{if(m>=p)throw f(N);b(n,m++,a)}return n.length=m,n}})}}]);
//# sourceMappingURL=chunk-6de5036d.3e233846.js.map