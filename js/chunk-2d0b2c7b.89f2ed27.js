(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0b2c7b"],{2623:function(e,t,a){"use strict";a.r(t);var o=a("7a23"),s={class:"container position-realtive d-flex flex-column align-items-center justify-content-center vh-100"},c={class:"p-8 d-flex flex-column align-items-center shadow"},n=Object(o["createElementVNode"])("p",{class:"h1 fs-3 fs-sm-1 opacity-10 text-black mb-8"},"R e s i s t a n c e",-1),r={class:"p-4"},l=Object(o["createElementVNode"])("label",{for:"email",class:"me-4"},[Object(o["createElementVNode"])("i",{class:"bi bi-person-fill"})],-1),i={class:"p-4"},d=Object(o["createElementVNode"])("label",{for:"password",class:"me-4"},[Object(o["createElementVNode"])("i",{class:"bi bi-key-fill"})],-1),m={class:"p-4 text-center d-flex"},b={type:"submit",class:"btn btn-primary fs-4 w-100"},u=Object(o["createTextVNode"])("確認 "),p={key:0,class:"fw-bold"},f={key:1,class:"fw-bold"},j={class:"align-self-end"};function O(e,t,a,O,h,w){var V=Object(o["resolveComponent"])("Loading"),v=Object(o["resolveComponent"])("Field"),N=Object(o["resolveComponent"])("ErrorMessage"),E=Object(o["resolveComponent"])("Form"),g=Object(o["resolveComponent"])("AccountModal");return Object(o["openBlock"])(),Object(o["createElementBlock"])("section",s,[Object(o["createVNode"])(V,{active:h.isLoading,"z-index":1060},null,8,["active"]),Object(o["createElementVNode"])("div",c,[n,Object(o["createElementVNode"])("div",{class:"textSwitch d-flex justify-content-center w-100 mb-2",onClick:t[0]||(t[0]=Object(o["withModifiers"])((function(){return w.switchContent&&w.switchContent.apply(w,arguments)}),["stop"]))},[Object(o["createElementVNode"])("button",{class:Object(o["normalizeClass"])([{"fw-bolder":"登入"===h.action},"btn btn-bg-light border-end rounded-0 fs-3 w-50 py-5"]),type:"button"},"登入",2),Object(o["createElementVNode"])("button",{class:Object(o["normalizeClass"])([{"fw-bolder":"註冊"===h.action},"btn btn-bg-light border-start rounded-0 fs-3 w-50 py-5"]),type:"button"},"註冊",2)]),Object(o["createVNode"])(E,{class:"d-flex flex-column mb-5",ref:"accountForm",onSubmit:w.sign},{default:Object(o["withCtx"])((function(e){var a=e.errors;return[Object(o["createElementVNode"])("div",r,[l,Object(o["createVNode"])(v,{modelValue:h.user.email,"onUpdate:modelValue":t[1]||(t[1]=function(e){return h.user.email=e}),class:Object(o["normalizeClass"])([{"is-invalid":a["email"]},"w-100 border-0 border-bottom"]),rules:"email|required",name:"email",type:"text",placeholder:"請輸入信箱",id:"email"},null,8,["modelValue","class"]),Object(o["createVNode"])(N,{name:"email",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",i,[d,Object(o["createVNode"])(v,{modelValue:h.user.password,"onUpdate:modelValue":t[2]||(t[2]=function(e){return h.user.password=e}),class:Object(o["normalizeClass"])([{"is-invalid":a["password"]},"w-100 border-0 border-bottom"]),rules:"required|min:6",type:"password",name:"password",placeholder:"請輸入密碼",id:"password"},null,8,["modelValue","class"]),Object(o["createVNode"])(N,{name:"password",class:"invalid-feedback"})]),Object(o["createElementVNode"])("div",m,[Object(o["createElementVNode"])("button",b,[u,"登入"===h.action?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",p,"登入")):Object(o["createCommentVNode"])("",!0),"註冊"===h.action?(Object(o["openBlock"])(),Object(o["createElementBlock"])("span",f,"註冊")):Object(o["createCommentVNode"])("",!0)])])]})),_:1},8,["onSubmit"]),Object(o["createElementVNode"])("div",j,[Object(o["createElementVNode"])("button",{onClick:t[3]||(t[3]=Object(o["withModifiers"])((function(){return w.openModal&&w.openModal.apply(w,arguments)}),["prevent","stop"])),class:"btn text-secondary p-4"},"忘記密碼?")])]),Object(o["createVNode"])(g,{ref:"accountModal",onUpdatePasssword:w.updatePasssword},null,8,["onUpdatePasssword"])])}a("ac1f"),a("5319");var h=a("ea7b"),w=a("b414"),V={ref:"modal",class:"modal fade z-index-999",id:"productModal",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"},v={class:"modal-dialog modal-xl"},N={class:"modal-content"},E=Object(o["createElementVNode"])("div",{class:"modal-header bg-secondary"},[Object(o["createElementVNode"])("h5",{class:"modal-title text-white",id:"productModalLabel"}," 修改密碼 "),Object(o["createElementVNode"])("button",{type:"button",class:"btn-close","data-bs-dismiss":"modal","aria-label":"Close"})],-1),g={class:"modal-body"},y={class:"container"},x={class:"row"},k={class:"col-12"},C={class:"row mb-3"},M={class:"col-12"},F=Object(o["createElementVNode"])("label",{for:"title",class:"form-label"},"電子郵件",-1),$={class:"modal-footer"},B=Object(o["createElementVNode"])("button",{type:"button",class:"btn btn-light","data-bs-dismiss":"modal"},"取消",-1);function S(e,t,a,s,c,n){return Object(o["openBlock"])(),Object(o["createElementBlock"])("div",V,[Object(o["createElementVNode"])("div",v,[Object(o["createElementVNode"])("div",N,[E,Object(o["createElementVNode"])("div",g,[Object(o["createElementVNode"])("div",y,[Object(o["createElementVNode"])("div",x,[Object(o["createElementVNode"])("div",k,[Object(o["createElementVNode"])("div",C,[Object(o["createElementVNode"])("div",M,[Object(o["createElementVNode"])("div",null,[F,Object(o["withDirectives"])(Object(o["createElementVNode"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(e){return c.user.email=e}),type:"text",class:"form-control",placeholder:"輸入原帳號電子信箱"},null,512),[[o["vModelText"],c.user.email]])])])])])])])]),Object(o["createElementVNode"])("div",$,[B,Object(o["createElementVNode"])("button",{onClick:t[1]||(t[1]=Object(o["withModifiers"])((function(){return n.updatePassword&&n.updatePassword.apply(n,arguments)}),["stop"])),type:"button",class:"btn btn-primary"},"確認")])])])],512)}var z=a("c9c0"),P={inject:["toNormalTime","toTimestamp"],mixins:[z["a"]],emits:["update-passsword"],data:function(){return{user:{email:"",password:""}}},methods:{updatePassword:function(){this.$emit("update-passsword",this.user),this.closeModal()}}},U=a("d959"),A=a.n(U);const L=A()(P,[["render",S]]);var T=L,q={name:"FrontLogin",data:function(){return{user:{email:"",password:""},action:"登入",isLoading:!1}},components:{AccountModal:T},inject:["putMessageState","emitter"],methods:{sign:function(){var e=this;"註冊"===this.action?Object(h["a"])(w["a"],this.user.email,this.user.password).then((function(){w["a"].languageCode="zh-TW",w["a"].ActionCodeSettings={url:"https://ted31539.github.io/resistance/#/login/?email=".concat(w["a"].currentUser.email)},Object(h["d"])(w["a"].currentUser,w["a"].ActionCodeSettings).then((function(){e.$refs.accountForm.resetForm(),e.emitter.emit("push-message",{content:"驗證信已發送到您的信箱，請點選信中驗證連結",state:!0})}))})).catch((function(t){e.$refs.accountForm.resetForm();var a="";switch(t.message){case"Firebase: Error (auth/email-already-in-use).":a="帳號已註冊";break;default:a="註冊失敗"}e.emitter.emit("push-message",{content:a,state:!1})})):"登入"===this.action&&Object(h["f"])(w["a"],this.user.email,this.user.password).then((function(){e.$refs.accountForm.resetForm()})).catch((function(t){var a="";switch(t.message){case"Firebase: Error (auth/user-not-found).":a="帳號不存在";break;case"Firebase: Error (auth/wrong-password).":a="密碼錯誤";break;default:a=""}e.emitter.emit("push-message",{content:"登入失敗，".concat(a),state:!1})}))},switchContent:function(e){var t=e.target.innerText;this.action=t},getAuthState:function(){var e=this;Object(h["c"])(w["a"],(function(t){t&&(t.emailVerified?(e.emitter.emit("push-message",{content:"登入成功",state:!0}),e.$router.push("/member")):e.emitter.emit("push-message",{content:"請至信箱驗證帳號",state:!1}))}))},openModal:function(){this.$refs.accountModal.openModal()},updatePasssword:function(e){var t=this;Object(h["e"])(w["a"],e.email).then((function(){t.$refs.accountForm.resetForm(),t.$router.replace("/login"),t.emitter.emit("push-message",{content:"請至您的信箱，請點選信中驗連結定新密碼",state:!0})})).catch((function(){t.$refs.accountForm.resetForm(),t.emitter.emit("push-message",{content:"發生錯誤，請重新整理頁面",state:!1})}))}},created:function(){this.getAuthState()}};const J=A()(q,[["render",O]]);t["default"]=J}}]);
//# sourceMappingURL=chunk-2d0b2c7b.89f2ed27.js.map