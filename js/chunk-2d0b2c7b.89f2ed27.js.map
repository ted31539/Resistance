{"version":3,"sources":["webpack:///./src/views/front/member/FrontLogin.vue","webpack:///./src/components/modal/AccountModal.vue","webpack:///./src/components/modal/AccountModal.vue?bff7","webpack:///./src/views/front/member/FrontLogin.vue?f341"],"names":["class","_createElementVNode","for","type","_createElementBlock","_createVNode","_component_Loading","active","$data","z-index","_hoisted_3","onClick","$options","_component_Form","ref","onSubmit","errors","_hoisted_5","_component_Field","email","$event","rules","name","placeholder","id","_component_ErrorMessage","_hoisted_7","password","_component_AccountModal","onUpdatePasssword","tabindex","aria-labelledby","aria-hidden","data-bs-dismiss","aria-label","_hoisted_4","_hoisted_11","_hoisted_13","inject","mixins","modalMixin","emits","data","user","methods","updatePassword","this","$emit","closeModal","__exports__","action","isLoading","components","AccountModal","sign","createUserWithEmailAndPassword","auth","then","languageCode","ActionCodeSettings","url","currentUser","sendEmailVerification","$refs","accountForm","resetForm","emitter","emit","content","state","catch","error","message","signInWithEmailAndPassword","switchContent","e","target","innerText","getAuthState","onAuthStateChanged","emailVerified","$router","push","openModal","accountModal","updatePasssword","sendPasswordResetEmail","replace","created","render"],"mappings":"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","file":"js/chunk-2d0b2c7b.89f2ed27.js","sourcesContent":["<template>\n  <section class=\"container position-realtive d-flex flex-column align-items-center justify-content-center vh-100\">\n    <Loading :active=\"isLoading\" :z-index=\"1060\"></Loading>\n\n    <div class=\"p-8 d-flex flex-column align-items-center shadow\">\n      <p class=\"h1 fs-3 fs-sm-1 opacity-10 text-black mb-8\">R e s i s t a n c e</p>\n      <div class=\"textSwitch d-flex justify-content-center w-100 mb-2\" @click.stop=\"switchContent\">\n        <button :class=\"{ 'fw-bolder': action === '登入' }\" type=\"button\"\n          class=\"btn btn-bg-light border-end rounded-0 fs-3 w-50 py-5\">登入</button>\n        <button :class=\"{ 'fw-bolder': action === '註冊' }\" type=\"button\"\n          class=\"btn btn-bg-light border-start rounded-0 fs-3 w-50 py-5\">註冊</button>\n      </div>\n      <Form class=\"d-flex flex-column mb-5\" ref=\"accountForm\" @submit=\"sign\" v-slot=\"{ errors }\">\n        <div class=\"p-4\">\n          <label for=\"email\" class=\"me-4\"><i class=\"bi bi-person-fill\"></i></label>\n          <Field v-model=\"user.email\" :class=\"{ 'is-invalid': errors['email'] }\" rules=\"email|required\" name=\"email\"\n            type=\"text\" class=\"w-100 border-0 border-bottom\" placeholder=\"請輸入信箱\" id=\"email\" />\n          <ErrorMessage name=\"email\" class=\"invalid-feedback\" />\n        </div>\n        <div class=\"p-4\">\n          <label for=\"password\" class=\"me-4\"><i class=\"bi bi-key-fill\"></i></label>\n          <Field v-model=\"user.password\" :class=\"{ 'is-invalid': errors['password'] }\" rules=\"required|min:6\"\n            type=\"password\" name=\"password\" class=\"w-100 border-0 border-bottom\" placeholder=\"請輸入密碼\" id=\"password\" />\n          <ErrorMessage name=\"password\" class=\"invalid-feedback\" />\n        </div>\n        <div class=\"p-4 text-center d-flex\">\n          <button type=\"submit\" class=\"btn btn-primary fs-4 w-100\">確認\n            <span v-if=\"action === '登入'\" class=\"fw-bold\">登入</span>\n            <span v-if=\"action === '註冊'\" class=\"fw-bold\">註冊</span>\n          </button>\n        </div>\n      </Form>\n      <div class=\"align-self-end\">\n        <button @click.prevent.stop=\"openModal\" class=\"btn text-secondary p-4\">忘記密碼?</button>\n      </div>\n    </div>\n    <AccountModal ref=\"accountModal\" @update-passsword=\"updatePasssword\" />\n  </section>\n</template>\n\n<script>\nimport {\n  createUserWithEmailAndPassword, signInWithEmailAndPassword, sendEmailVerification, onAuthStateChanged, sendPasswordResetEmail,\n} from 'firebase/auth';\nimport { auth } from '@/methods/firebase';\nimport AccountModal from '@/components/modal/AccountModal.vue';\n\nexport default {\n  name: 'FrontLogin',\n  data() {\n    return {\n      user: {\n        email: '',\n        password: '',\n      },\n      action: '登入',\n      isLoading: false,\n    };\n  },\n  components: {\n    AccountModal,\n  },\n  inject: ['putMessageState', 'emitter'],\n  methods: {\n    sign() {\n      if (this.action === '註冊') {\n        createUserWithEmailAndPassword(auth, this.user.email, this.user.password)\n          .then(() => {\n            auth.languageCode = 'zh-TW';\n            auth.ActionCodeSettings = {\n              url: `https://ted31539.github.io/resistance/#/login/?email=${auth.currentUser.email}`,\n            };\n            sendEmailVerification(auth.currentUser, auth.ActionCodeSettings).then(() => {\n              this.$refs.accountForm.resetForm();\n              this.emitter.emit('push-message', {\n                content: '驗證信已發送到您的信箱，請點選信中驗證連結',\n                state: true,\n              });\n            });\n          })\n          .catch((error) => {\n            this.$refs.accountForm.resetForm();\n            let message = '';\n            switch (error.message) {\n              case 'Firebase: Error (auth/email-already-in-use).':\n                message = '帳號已註冊';\n                break;\n              default:\n                message = '註冊失敗';\n            }\n            this.emitter.emit('push-message', {\n              content: message,\n              state: false,\n            });\n          });\n      } else if (this.action === '登入') {\n        signInWithEmailAndPassword(auth, this.user.email, this.user.password)\n          .then(() => {\n            this.$refs.accountForm.resetForm();\n          })\n          .catch((error) => {\n            let message = '';\n            switch (error.message) {\n              case 'Firebase: Error (auth/user-not-found).':\n                message = '帳號不存在';\n                break;\n              case 'Firebase: Error (auth/wrong-password).':\n                message = '密碼錯誤';\n                break;\n              default:\n                message = '';\n            }\n            this.emitter.emit('push-message', {\n              content: `登入失敗，${message}`,\n              state: false,\n            });\n          });\n      }\n    },\n    switchContent(e) {\n      const target = e.target.innerText;\n      this.action = target;\n    },\n    getAuthState() {\n      onAuthStateChanged(auth, (user) => {\n        if (user) {\n          if (user.emailVerified) {\n            this.emitter.emit('push-message', {\n              content: '登入成功',\n              state: true,\n            });\n            this.$router.push('/member');\n          } else {\n            this.emitter.emit('push-message', {\n              content: '請至信箱驗證帳號',\n              state: false,\n            });\n          }\n        }\n      });\n    },\n    openModal() {\n      this.$refs.accountModal.openModal();\n    },\n    updatePasssword(user) {\n      sendPasswordResetEmail(auth, user.email).then(() => {\n        this.$refs.accountForm.resetForm();\n        this.$router.replace('/login');\n        this.emitter.emit('push-message', {\n          content: '請至您的信箱，請點選信中驗連結定新密碼',\n          state: true,\n        });\n      }).catch(() => {\n        this.$refs.accountForm.resetForm();\n        this.emitter.emit('push-message', {\n          content: '發生錯誤，請重新整理頁面',\n          state: false,\n        });\n      });\n    },\n  },\n  created() {\n    this.getAuthState();\n  },\n};\n</script>\n","<template>\n  <div ref=\"modal\" class=\"modal fade z-index-999\" id=\"productModal\" tabindex=\"-1\" aria-labelledby=\"productModalLabel\"\n    aria-hidden=\"true\">\n    <div class=\"modal-dialog modal-xl\">\n      <div class=\"modal-content\">\n        <div class=\"modal-header bg-secondary\">\n          <h5 class=\"modal-title text-white\" id=\"productModalLabel\">\n            修改密碼\n          </h5>\n          <button type=\"button\" class=\"btn-close\" data-bs-dismiss=\"modal\" aria-label=\"Close\"></button>\n        </div>\n        <div class=\"modal-body\">\n          <div class=\"container\">\n            <div class=\"row\">\n              <div class=\"col-12\">\n                <div class=\"row mb-3\">\n                  <div class=\"col-12\">\n                    <div>\n                      <label for=\"title\" class=\"form-label\">電子郵件</label>\n                      <input v-model=\"user.email\" type=\"text\" class=\"form-control\" placeholder=\"輸入原帳號電子信箱\">\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n        <div class=\"modal-footer\">\n          <button type=\"button\" class=\"btn btn-light\" data-bs-dismiss=\"modal\">取消</button>\n          <button @click.stop=\"updatePassword\" type=\"button\" class=\"btn btn-primary\">確認</button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport modalMixin from '@/misxins/modalMixins';\n\nexport default {\n  inject: ['toNormalTime', 'toTimestamp'],\n  mixins: [modalMixin],\n  emits: ['update-passsword'],\n  data() {\n    return {\n      user: {\n        email: '',\n        password: '',\n      },\n    };\n  },\n  methods: {\n    updatePassword() {\n      this.$emit('update-passsword', this.user);\n      this.closeModal();\n    },\n  },\n};\n</script>\n","import { render } from \"./AccountModal.vue?vue&type=template&id=7ddee5ea\"\nimport script from \"./AccountModal.vue?vue&type=script&lang=js\"\nexport * from \"./AccountModal.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Ted\\\\Documents\\\\六角\\\\clothes - 複製\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","import { render } from \"./FrontLogin.vue?vue&type=template&id=c6bdfa92\"\nimport script from \"./FrontLogin.vue?vue&type=script&lang=js\"\nexport * from \"./FrontLogin.vue?vue&type=script&lang=js\"\n\nimport exportComponent from \"C:\\\\Users\\\\Ted\\\\Documents\\\\六角\\\\clothes - 複製\\\\node_modules\\\\@vue\\\\cli-service\\\\node_modules\\\\vue-loader-v16\\\\dist\\\\exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__"],"sourceRoot":""}